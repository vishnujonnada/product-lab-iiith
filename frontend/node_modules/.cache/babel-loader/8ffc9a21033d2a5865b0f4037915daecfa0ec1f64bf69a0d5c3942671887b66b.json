{"ast":null,"code":"var _jsxFileName = \"/home/vishnapanyala/Desktop/myapp/src/components/annotate.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Stage, Layer, Image, Rect, Transformer } from 'react-konva';\nimport useImage from 'use-image';\nimport { FaTrash } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnnotateImage = _ref => {\n  _s();\n  let {\n    imageUrl\n  } = _ref;\n  const [image] = useImage(imageUrl);\n  const [rectangles, setRectangles] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const [rectangleTexts, setRectangleTexts] = useState([]);\n  const handleMouseDown = e => {\n    // Deselect the currently selected rectangle\n    setSelectedId(null);\n    const x = e.evt.offsetX;\n    const y = e.evt.offsetY;\n    setRectangles([...rectangles, {\n      x,\n      y,\n      width: 0,\n      height: 0\n    }]);\n    setRectangleTexts([...rectangleTexts, '']);\n  };\n  const handleTextChange = (e, index) => {\n    const newRectangleTexts = [...rectangleTexts];\n    newRectangleTexts[index] = e.target.value;\n    setRectangleTexts(newRectangleTexts);\n  };\n  const handleDeleteBox = index => {\n    const newRectangles = [...rectangles];\n    newRectangles.splice(index, 1);\n    setRectangles(newRectangles);\n    const newRectangleTexts = [...rectangleTexts];\n    newRectangleTexts.splice(index, 1);\n    setRectangleTexts(newRectangleTexts);\n  };\n  return /*#__PURE__*/_jsxDEV(Stage, {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    onMouseDown: handleMouseDown,\n    children: /*#__PURE__*/_jsxDEV(Layer, {\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        image: image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), rectangles.map((rect, i) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Rect, {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height,\n          stroke: \"red\",\n          strokeWidth: 2,\n          draggable: true,\n          onClick: () => setSelectedId(i),\n          onTap: () => setSelectedId(i)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), selectedId === i && /*#__PURE__*/_jsxDEV(Transformer, {\n          anchorSize: 8,\n          borderStroke: \"red\",\n          rotateEnabled: false,\n          keepRatio: false,\n          boundBoxFunc: (oldBox, newBox) => {\n            // Limit resizing to avoid negative dimensions\n            newBox.width = Math.max(0, newBox.width);\n            newBox.height = Math.max(0, newBox.height);\n            return newBox;\n          },\n          enabledAnchors: ['top-left', 'top-right', 'bottom-left', 'bottom-right'],\n          onTransform: e => {\n            const node = e.target;\n            const scaleX = node.scaleX();\n            const scaleY = node.scaleY();\n            const width = Math.max(0, node.width() * scaleX);\n            const height = Math.max(0, node.height() * scaleY);\n            const x = node.x();\n            const y = node.y();\n            setRectangles(prevRectangles => {\n              const updatedRectangles = [...prevRectangles];\n              updatedRectangles[i] = {\n                x,\n                y,\n                width,\n                height\n              };\n              return updatedRectangles;\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: rectangleTexts[i],\n          onChange: e => handleTextChange(e, i),\n          style: {\n            position: 'absolute',\n            left: rect.x,\n            top: rect.y - 25,\n            width: rect.width\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FaTrash, {\n          className: \"delete-icon\",\n          onClick: () => handleDeleteBox(i),\n          style: {\n            position: 'absolute',\n            left: rect.x + rect.width - 20,\n            top: rect.y - 20\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(AnnotateImage, \"K4lRTRVk28bN6KWkEfLVpl2jL/U=\", false, function () {\n  return [useImage];\n});\n_c = AnnotateImage;\nexport default AnnotateImage;\nvar _c;\n$RefreshReg$(_c, \"AnnotateImage\");","map":{"version":3,"names":["React","useState","Stage","Layer","Image","Rect","Transformer","useImage","FaTrash","jsxDEV","_jsxDEV","AnnotateImage","_ref","_s","imageUrl","image","rectangles","setRectangles","selectedId","setSelectedId","rectangleTexts","setRectangleTexts","handleMouseDown","e","x","evt","offsetX","y","offsetY","width","height","handleTextChange","index","newRectangleTexts","target","value","handleDeleteBox","newRectangles","splice","window","innerWidth","innerHeight","onMouseDown","children","fileName","_jsxFileName","lineNumber","columnNumber","map","rect","i","Fragment","stroke","strokeWidth","draggable","onClick","onTap","anchorSize","borderStroke","rotateEnabled","keepRatio","boundBoxFunc","oldBox","newBox","Math","max","enabledAnchors","onTransform","node","scaleX","scaleY","prevRectangles","updatedRectangles","type","onChange","style","position","left","top","className","_c","$RefreshReg$"],"sources":["/home/vishnapanyala/Desktop/myapp/src/components/annotate.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Stage, Layer, Image, Rect, Transformer } from 'react-konva';\nimport useImage from 'use-image';\nimport { FaTrash } from 'react-icons/fa';\n\nconst AnnotateImage = ({ imageUrl }) => {\n  const [image] = useImage(imageUrl);\n  const [rectangles, setRectangles] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const [rectangleTexts, setRectangleTexts] = useState([]);\n\n  const handleMouseDown = (e) => {\n    // Deselect the currently selected rectangle\n    setSelectedId(null);\n\n    const x = e.evt.offsetX;\n    const y = e.evt.offsetY;\n    setRectangles([...rectangles, { x, y, width: 0, height: 0 }]);\n    setRectangleTexts([...rectangleTexts, '']);\n  };\n\n  const handleTextChange = (e, index) => {\n    const newRectangleTexts = [...rectangleTexts];\n    newRectangleTexts[index] = e.target.value;\n    setRectangleTexts(newRectangleTexts);\n  };\n\n  const handleDeleteBox = (index) => {\n    const newRectangles = [...rectangles];\n    newRectangles.splice(index, 1);\n    setRectangles(newRectangles);\n\n    const newRectangleTexts = [...rectangleTexts];\n    newRectangleTexts.splice(index, 1);\n    setRectangleTexts(newRectangleTexts);\n  };\n\n  return (\n    <Stage\n      width={window.innerWidth}\n      height={window.innerHeight}\n      onMouseDown={handleMouseDown}\n    >\n      <Layer>\n        <Image image={image} />\n        {rectangles.map((rect, i) => (\n          <React.Fragment key={i}>\n            <Rect\n              x={rect.x}\n              y={rect.y}\n              width={rect.width}\n              height={rect.height}\n              stroke=\"red\"\n              strokeWidth={2}\n              draggable\n              onClick={() => setSelectedId(i)}\n              onTap={() => setSelectedId(i)}\n            />\n            {selectedId === i && (\n              <Transformer\n                anchorSize={8}\n                borderStroke=\"red\"\n                rotateEnabled={false}\n                keepRatio={false}\n                boundBoxFunc={(oldBox, newBox) => {\n                  // Limit resizing to avoid negative dimensions\n                  newBox.width = Math.max(0, newBox.width);\n                  newBox.height = Math.max(0, newBox.height);\n                  return newBox;\n                }}\n                enabledAnchors={['top-left', 'top-right', 'bottom-left', 'bottom-right']}\n                onTransform={(e) => {\n                  const node = e.target;\n                  const scaleX = node.scaleX();\n                  const scaleY = node.scaleY();\n\n                  const width = Math.max(0, node.width() * scaleX);\n                  const height = Math.max(0, node.height() * scaleY);\n                  const x = node.x();\n                  const y = node.y();\n\n                  setRectangles((prevRectangles) => {\n                    const updatedRectangles = [...prevRectangles];\n                    updatedRectangles[i] = { x, y, width, height };\n                    return updatedRectangles;\n                  });\n                }}\n              />\n            )}\n            <input\n              type=\"text\"\n              value={rectangleTexts[i]}\n              onChange={(e) => handleTextChange(e, i)}\n              style={{ position: 'absolute', left: rect.x, top: rect.y - 25, width: rect.width }}\n              />\n              <FaTrash\n              className=\"delete-icon\"\n              onClick={() => handleDeleteBox(i)}\n              style={{ position: 'absolute', left: rect.x + rect.width - 20, top: rect.y - 20 }}\n              />\n              </React.Fragment>\n              ))}\n              </Layer>\n              </Stage>\n              );\n              };\n              \n              export default AnnotateImage;\n              \n              "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}