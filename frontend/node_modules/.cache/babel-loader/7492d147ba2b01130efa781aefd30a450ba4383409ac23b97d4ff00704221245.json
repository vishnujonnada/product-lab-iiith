{"ast":null,"code":"var _jsxFileName = \"/home/vishnapanyala/Desktop/myapp/src/components/annotate.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Stage, Layer, Image, Rect, Transformer } from 'react-konva';\nimport useImage from 'use-image';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AnnotateImage = _ref => {\n  _s();\n  let {\n    imageUrl\n  } = _ref;\n  const [image] = useImage(imageUrl);\n  const [rectangles, setRectangles] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const isDrawing = React.useRef(false);\n  const handleMouseDown = e => {\n    isDrawing.current = true;\n    const x = e.evt.x;\n    const y = e.evt.y;\n    setRectangles([...rectangles, {\n      x,\n      y,\n      width: 0,\n      height: 0\n    }]);\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing.current) {\n      return;\n    }\n    const currentRect = rectangles[rectangles.length - 1];\n    currentRect.width = e.evt.x - currentRect.x;\n    currentRect.height = e.evt.y - currentRect.y;\n    const newRectangles = rectangles.slice(0, rectangles.length - 1);\n    newRectangles.push(currentRect);\n    setRectangles(newRectangles);\n  };\n  const handleMouseUp = () => {\n    isDrawing.current = false;\n  };\n  const handleRectClick = (e, id) => {\n    setSelectedId(id);\n  };\n  const handleTransformerChange = e => {\n    const updatedRectangles = rectangles.slice();\n    updatedRectangles[selectedId] = {\n      ...updatedRectangles[selectedId],\n      ...e.currentTarget.attrs\n    };\n    setRectangles(updatedRectangles);\n  };\n  return /*#__PURE__*/_jsxDEV(Stage, {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    onMouseDown: handleMouseDown,\n    onMousemove: handleMouseMove,\n    onMouseup: handleMouseUp,\n    children: /*#__PURE__*/_jsxDEV(Layer, {\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        image: image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), rectangles.map((rect, i) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Rect, {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height,\n          stroke: selectedId === i ? 'red' : 'black',\n          strokeWidth: 2,\n          draggable: true,\n          onClick: e => handleRectClick(e, i)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), selectedId === i && /*#__PURE__*/_jsxDEV(Transformer, {\n          boundBoxFunc: (oldBox, newBox) => {\n            // Limit the minimum width and height of the box\n            newBox.width = Math.max(30, newBox.width);\n            newBox.height = Math.max(30, newBox.height);\n            return newBox;\n          },\n          keepRatio: false,\n          rotateEnabled: false,\n          enabledAnchors: ['top-left', 'top-right', 'bottom-left', 'bottom-right'],\n          anchorSize: 6,\n          borderStroke: \"#2196f3\",\n          onTransform: handleTransformerChange,\n          ignoreStroke: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(AnnotateImage, \"5djzFKr8ZgNk5Yktg66C1bfLo+k=\", false, function () {\n  return [useImage];\n});\n_c = AnnotateImage;\nexport default AnnotateImage;\nvar _c;\n$RefreshReg$(_c, \"AnnotateImage\");","map":{"version":3,"names":["React","useState","Stage","Layer","Image","Rect","Transformer","useImage","jsxDEV","_jsxDEV","AnnotateImage","_ref","_s","imageUrl","image","rectangles","setRectangles","selectedId","setSelectedId","isDrawing","useRef","handleMouseDown","e","current","x","evt","y","width","height","handleMouseMove","currentRect","length","newRectangles","slice","push","handleMouseUp","handleRectClick","id","handleTransformerChange","updatedRectangles","currentTarget","attrs","window","innerWidth","innerHeight","onMouseDown","onMousemove","onMouseup","children","fileName","_jsxFileName","lineNumber","columnNumber","map","rect","i","Fragment","stroke","strokeWidth","draggable","onClick","boundBoxFunc","oldBox","newBox","Math","max","keepRatio","rotateEnabled","enabledAnchors","anchorSize","borderStroke","onTransform","ignoreStroke","_c","$RefreshReg$"],"sources":["/home/vishnapanyala/Desktop/myapp/src/components/annotate.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Stage, Layer, Image, Rect, Transformer } from 'react-konva';\nimport useImage from 'use-image';\n\nconst AnnotateImage = ({ imageUrl }) => {\n  const [image] = useImage(imageUrl);\n  const [rectangles, setRectangles] = useState([]);\n  const [selectedId, setSelectedId] = useState(null);\n  const isDrawing = React.useRef(false);\n\n  const handleMouseDown = (e) => {\n    isDrawing.current = true;\n    const x = e.evt.x;\n    const y = e.evt.y;\n    setRectangles([...rectangles, { x, y, width: 0, height: 0 }]);\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isDrawing.current) {\n      return;\n    }\n    const currentRect = rectangles[rectangles.length - 1];\n    currentRect.width = e.evt.x - currentRect.x;\n    currentRect.height = e.evt.y - currentRect.y;\n\n    const newRectangles = rectangles.slice(0, rectangles.length - 1);\n    newRectangles.push(currentRect);\n    setRectangles(newRectangles);\n  };\n\n  const handleMouseUp = () => {\n    isDrawing.current = false;\n  };\n\n  const handleRectClick = (e, id) => {\n    setSelectedId(id);\n  };\n\n  const handleTransformerChange = (e) => {\n    const updatedRectangles = rectangles.slice();\n    updatedRectangles[selectedId] = {\n      ...updatedRectangles[selectedId],\n      ...e.currentTarget.attrs,\n    };\n    setRectangles(updatedRectangles);\n  };\n\n  return (\n    <Stage\n      width={window.innerWidth}\n      height={window.innerHeight}\n      onMouseDown={handleMouseDown}\n      onMousemove={handleMouseMove}\n      onMouseup={handleMouseUp}\n    >\n      <Layer>\n        <Image image={image} />\n        {rectangles.map((rect, i) => (\n          <React.Fragment key={i}>\n            <Rect\n              x={rect.x}\n              y={rect.y}\n              width={rect.width}\n              height={rect.height}\n              stroke={selectedId === i ? 'red' : 'black'}\n              strokeWidth={2}\n              draggable\n              onClick={(e) => handleRectClick(e, i)}\n            />\n            {selectedId === i && (\n              <Transformer\n                boundBoxFunc={(oldBox, newBox) => {\n                  // Limit the minimum width and height of the box\n                  newBox.width = Math.max(30, newBox.width);\n                  newBox.height = Math.max(30, newBox.height);\n                  return newBox;\n                }}\n                keepRatio={false}\n                rotateEnabled={false}\n                enabledAnchors={['top-left', 'top-right', 'bottom-left', 'bottom-right']}\n                anchorSize={6}\n                borderStroke=\"#2196f3\"\n                onTransform={handleTransformerChange}\n                ignoreStroke={true}\n              />\n            )}\n          </React.Fragment>\n        ))}\n      </Layer>\n    </Stage>\n  );\n};\n\nexport default AnnotateImage;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}