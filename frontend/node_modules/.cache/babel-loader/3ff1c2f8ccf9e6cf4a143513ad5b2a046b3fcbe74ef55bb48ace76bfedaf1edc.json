{"ast":null,"code":"import _objectSpread from\"/home/vishnapanyala/Desktop/myapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/vishnapanyala/Desktop/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{ReactPictureAnnotation}from'react-picture-annotation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AnnotateImage=function AnnotateImage(_ref){var image=_ref.image,initialAnnotations=_ref.annotations,onChangeAnnotations=_ref.onChangeAnnotations;var _useState=useState({width:window.innerWidth,height:window.innerHeight}),_useState2=_slicedToArray(_useState,2),pageSize=_useState2[0],setPageSize=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),annotations=_useState4[0],setAnnotations=_useState4[1];useEffect(function(){setAnnotations(initialAnnotations);},[initialAnnotations]);console.log('Annotations:',annotations);var onResize=function onResize(){setPageSize({width:window.innerWidth,height:window.innerHeight});};useEffect(function(){window.addEventListener('resize',onResize);return function(){return window.removeEventListener('resize',onResize);};},[]);var onSelect=function onSelect(selectedId){return console.log(selectedId);};// const onChange = (data) => {\n//   const updatedAnnotations = data.reduce((acc, currentAnnotation) => {\n//     const existingIndex = acc.findIndex((a) => a.id === currentAnnotation.id);\n//     if (existingIndex !== -1) {\n//       // Update existing annotation with the latest values\n//       acc[existingIndex] = currentAnnotation;\n//     } else {\n//       // Add new annotation\n//       acc.push(currentAnnotation);\n//     }\n//     return acc;\n//   }, [...annotations]);\n//   setAnnotations(updatedAnnotations);\n//   onChangeAnnotations(updatedAnnotations);\n// };\n// const handleDeleteBox = (id) => {\n//   const updatedAnnotations = annotations.filter((annotation) => annotation.id !== id);\n//   setAnnotations(updatedAnnotations);\n//   onChangeAnnotations(updatedAnnotations);\n// };\nvar onChange=function onChange(data){setAnnotations(data);onChangeAnnotations(data);};var handleDeleteBox=function handleDeleteBox(id){console.log(id);var updatedAnnotations=annotations.filter(function(annotation){return annotation.id!==id;});setAnnotations(updatedAnnotations);onChangeAnnotations(updatedAnnotations);};return/*#__PURE__*/_jsx(\"div\",{className:\"AnnotateImage\",children:/*#__PURE__*/_jsx(ReactPictureAnnotation,{image:image,annotationData:annotations,onSelect:onSelect,onChange:onChange,width:pageSize.width,height:pageSize.height,renderAnnotation:function renderAnnotation(_ref2){var annotation=_ref2.annotation;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:annotation.position.x,top:annotation.position.y},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:annotation.comment,onChange:function onChange(e){var updatedAnnotations=annotations.map(function(a){if(a.id===annotation.id){return _objectSpread(_objectSpread({},a),{},{comment:e.target.value});}return a;});setAnnotations(updatedAnnotations);onChangeAnnotations(updatedAnnotations);}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteBox(annotation.id);},children:\"Delete\"})]});}})});};export default AnnotateImage;","map":{"version":3,"names":["React","useState","useEffect","ReactPictureAnnotation","jsx","_jsx","jsxs","_jsxs","AnnotateImage","_ref","image","initialAnnotations","annotations","onChangeAnnotations","_useState","width","window","innerWidth","height","innerHeight","_useState2","_slicedToArray","pageSize","setPageSize","_useState3","_useState4","setAnnotations","console","log","onResize","addEventListener","removeEventListener","onSelect","selectedId","onChange","data","handleDeleteBox","id","updatedAnnotations","filter","annotation","className","children","annotationData","renderAnnotation","_ref2","style","position","left","x","top","y","type","value","comment","e","map","a","_objectSpread","target","onClick"],"sources":["/home/vishnapanyala/Desktop/myapp/src/components/annotate.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ReactPictureAnnotation } from 'react-picture-annotation';\n\nconst AnnotateImage = ({ image, annotations: initialAnnotations, onChangeAnnotations }) => {\n  const [pageSize, setPageSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [annotations, setAnnotations] = useState([]);\n\n  useEffect(() => {\n    setAnnotations(initialAnnotations);\n  }, [initialAnnotations]);\n\n  console.log('Annotations:', annotations);\n\n  const onResize = () => {\n    setPageSize({ width: window.innerWidth, height: window.innerHeight });\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  const onSelect = (selectedId) => console.log(selectedId);\n\n  // const onChange = (data) => {\n  //   const updatedAnnotations = data.reduce((acc, currentAnnotation) => {\n  //     const existingIndex = acc.findIndex((a) => a.id === currentAnnotation.id);\n  //     if (existingIndex !== -1) {\n  //       // Update existing annotation with the latest values\n  //       acc[existingIndex] = currentAnnotation;\n  //     } else {\n  //       // Add new annotation\n  //       acc.push(currentAnnotation);\n  //     }\n  //     return acc;\n  //   }, [...annotations]);\n    \n  //   setAnnotations(updatedAnnotations);\n  //   onChangeAnnotations(updatedAnnotations);\n  // };\n  \n  // const handleDeleteBox = (id) => {\n  //   const updatedAnnotations = annotations.filter((annotation) => annotation.id !== id);\n  //   setAnnotations(updatedAnnotations);\n  //   onChangeAnnotations(updatedAnnotations);\n  // };\n\n  const onChange = (data) => {\n    setAnnotations(data);\n    onChangeAnnotations(data);\n  };\n\n  const handleDeleteBox = (id) => {\n    console.log(id);\n    const updatedAnnotations = annotations.filter((annotation) => annotation.id !== id);\n    setAnnotations(updatedAnnotations);\n    onChangeAnnotations(updatedAnnotations);\n  };\n  \n\n  return (\n    <div className=\"AnnotateImage\">\n      <ReactPictureAnnotation\n        image={image}\n        annotationData={annotations}\n        onSelect={onSelect}\n        onChange={onChange}\n        width={pageSize.width}\n        height={pageSize.height}\n        renderAnnotation={({ annotation }) => (\n          <div style={{ position: 'absolute', left: annotation.position.x, top: annotation.position.y }}>\n            <input\n              type=\"text\"\n              value={annotation.comment}\n              onChange={(e) => {\n                const updatedAnnotations = annotations.map((a) => {\n                  if (a.id === annotation.id) {\n                    return { ...a, comment: e.target.value };\n                  }\n                  return a;\n                });\n                setAnnotations(updatedAnnotations);\n                onChangeAnnotations(updatedAnnotations);\n              }}\n            />\n            <button onClick={() => handleDeleteBox(annotation.id)}>Delete</button>\n          </div>\n        )}\n      />\n    </div>\n  );\n};\n\nexport default AnnotateImage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}